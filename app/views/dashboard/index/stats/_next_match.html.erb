<div class="col-md-4 mb-3">
  <% if @next_match.present? %>
    <div class="card shadow-sm h-100 border border-warning bg-dark text-light rounded-4 p-4">
      <div class="text-center mb-3">
        <i class="fas fa-futbol fa-2x text-warning"></i>
      </div>

      <h4 class="text-center fw-bold mb-4">
        <i class="fas fa-calendar-check me-2"></i>Próximo Partido
      </h4>

      <div class="bg-dark border border-secondary rounded-3 p-3 mb-3">
        <div class="d-flex justify-content-between">
          <div>
            <small class="text-muted d-block">Ubicación</small>
            <span class="fw-semibold"><%= @next_match.location.presence || 'No especificada' %></span>
          </div>
          <div>
            <small class="text-muted d-block">Fecha</small>
            <span class="fw-semibold"><%= date_in_spanish(@next_match.date) %></span>
          </div>
        </div>
      </div>

      <% if @next_match_weather.present? %>
        <div class="card border-warning bg-dark text-light rounded-3 shadow-sm p-3 text-center mb-4">
          <%= image_tag("https://openweathermap.org/img/wn/#{@next_match_weather[:icon]}@2x.png",
                        alt: "Clima", width: 60, height: 60, class: "mx-auto mb-2") %>
          <h6 class="fw-semibold text-warning mb-1"><%= @next_match_weather[:weather] %></h6>
          <p class="mb-1">
            <%= @next_match_weather[:temp] %>°C (sens. <%= @next_match_weather[:feels_like] %>°C)
          </p>
          <p class="mb-0 text-muted" style="font-size: 0.85rem;">
            Humedad: <%= @next_match_weather[:humidity] %> •
            Nubes: <%= @next_match_weather[:clouds] %> •
            Lluvia: <%= @next_match_weather[:rain_chance] %>
          </p>
          <small class="text-muted d-block mt-2">
            Pronóstico para las <%= @next_match_weather[:forecast_time] %> h
          </small>
        </div>
      <% else %>
        <p class="text-center fst-italic text-muted mb-4">
          No se pudo obtener el pronóstico del clima.
        </p>
      <% end %>

      <%= link_to 'Ver detalles del partido',
                  match_path(@next_match),
                  class: 'btn btn-outline-primary w-100 fw-bold py-2' %>
    </div>

  <% else %>
    <div class="card bg-dark text-light border border-secondary rounded-4 shadow-sm p-5 text-center">
      <i class="fas fa-calendar-times fa-3x text-secondary mb-3"></i>
      <h4 class="fw-semibold mb-2">Próximo Partido</h4>
      <p class="text-muted">No hay partidos programados por ahora.</p>
    </div>
  <% end %>
</div>
